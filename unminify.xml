<project name="MensApp" default="full">
	
    <!-- source directories -->
	<property name="phonegap_dir" location="${basedir}\assets\www\phonegap" />
	<property name="js_dir" location="${basedir}\assets\www\js" />
	<property name="jquery_dir" location="${basedir}\assets\www\jquery" />
	<property name="jquery_mobile_dir" location="${basedir}\assets\www\jquery.mobile" />
	<property name="phonegap_dir" location="${basedir}\assets\www\phonegap" />
	<property name="phonegap_plugin_dir" location="${basedir}\assets\www\phonegap\plugins" />
	<property name="css_dir" location="${basedir}\assets\www" />
	<property name="index_dir" location="${basedir}\assets\www" />
    
   	<target name="clean_minified">
		<!-- Clean tmp-files. -->
		<delete file="${js_dir}\date.format-min.js" />
		<delete file="${js_dir}\mobileinit-min.js" />
		<delete file="${js_dir}\default-min.js" />
		<delete file="${jquery_mobile_dir}\jquery.mobile-1.2.0-min.js" />
		<delete file="${phonegap_dir}\cordova-2.1.0-min.js" />
		<delete file="${phonegap_plugin_dir}\statusbarnotification-min.js" />
		<delete file="${jquery_mobile_dir}\jquery-1.8.2.min.js" />
		<delete file="${css_dir}\style-min.css" />
		<delete file="${jquery_mobile_dir}\jquery.mobile.mensapp.min.css" />
		<delete file="${jquery_mobile_dir}\jquery.mobile.structure-1.2.0.min.css" />
		<echo>Temporary files removed.</echo>
	</target>
    
	<target name="change_index" depends="clean_minified">
	    <replace file="${index_dir}/index.html" encoding="UTF-8"
	        token='link rel="stylesheet" href="jquery.mobile/jquery.mobile.mensapp.min.css"/'
	        value='link rel="stylesheet" href="jquery.mobile/jquery.mobile.mensapp.css"/'/>
   	    <replace file="${index_dir}/index.html" encoding="UTF-8"
	        token='link rel="stylesheet" href="jquery.mobile/jquery.mobile.structure-1.2.0.min.css"/'
	        value='link rel="stylesheet" href="jquery.mobile/jquery.mobile.structure-1.2.0.css"/'/>
   	    <replace file="${index_dir}/index.html" encoding="UTF-8"
	        token='link rel="stylesheet" href="style-min.css"/'
	        value='link rel="stylesheet" href="style.css"/'/>
  	    <replace file="${index_dir}/index.html" encoding="UTF-8"
	        token='script src="phonegap/cordova-2.1.0-min.js"/'
	        value='script src="phonegap/cordova-2.1.0.js"/'/>
	    <replace file="${index_dir}/index.html" encoding="UTF-8"
	        token='script src="phonegap/plugins/statusbarnotification-min.js"/'
	        value='script src="phonegap/plugins/statusbarnotification.js"/'/>
	    <replace file="${index_dir}/index.html" encoding="UTF-8"
	        token='script src="js/mobileinit-min.js"/'
	        value='script src="js/mobileinit.js"/'/>
	    <replace file="${index_dir}/index.html" encoding="UTF-8"
	        token='script src="js/date.format-min.js"/'
	        value='script src="js/date.format.js"/'/>
   	    <replace file="${index_dir}/index.html" encoding="UTF-8"
	        token='script src="js/default-min.js"/'
	        value='script src="js/default.js"/'/>
	    <replace file="${index_dir}/index.html" encoding="UTF-8"
	        token='script src="jquery.mobile/jquery.mobile-1.2.0-min.js"/'
	        value='script src="jquery.mobile/jquery.mobile-1.2.0.js"/'/>
	    <echo>index.html does now use minified file versions.</echo>
	</target>
	
	<target name="full" depends="change_index">
		<echo>Fully reverted minification!</echo>
	</target>

</project>